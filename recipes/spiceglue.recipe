# -*- Mode: Python -*- vi:si:et:sw=4:sts=4:ts=4:syntax=python


class Recipe(recipe.Recipe):
    name = 'spiceglue'
    version = '2.2.36'
    commit = 'a86f301f7d8e52c0f8be081dde4a5f9e2061e62f'
    remotes = {'origin': 'https://github.com/DeskBit/spiceglue.git'}

    autoreconf = True 
    autoreconf_sh = 'autoreconf -fiv'

    config_sh = './configure'

    licenses = [License.LGPLv2_1]
    deps = ['spice-protocol', 'spice-gtk']
    files_libs = ['libspiceglue']

    def prepare(self):
        if self.config.target_platform != Platform.WINDOWS:
            self.configure_options += ' --disable-printing --disable-usbredir --disable-clipboard'
        else:
            self.append_env['CFLAGS'] = ' -O2 -fPIC'

